/* Copy button styles - Updated to be outside the message box */
.copy-btn {
  position: absolute;
  top: 0;
  right: -40px; /* Position outside the message box */
  background: rgba(108, 117, 125, 0.1);
  border: 1px solid rgba(108, 117, 125, 0.2);
  border-radius: 6px;
  padding: 6px 8px;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
  opacity: 0;
  visibility: hidden;
  backdrop-filter: blur(4px);
  color: #6c757d;
  z-index: 10;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Show copy button on hover of the entire message container */
.user:hover .copy-btn,
.model:hover .copy-btn,
.tempResponse:hover .copy-btn {
  opacity: 1;
  visibility: visible;
}

.copy-btn:hover {
  background: rgba(108, 117, 125, 0.2);
  border-color: rgba(108, 117, 125, 0.4);
  color: #495057;
  transform: scale(1.05);
}

.copy-btn:active {
  transform: scale(0.95);
}

/* Ensure message containers have relative positioning for the absolute copy button */
.user, .model, .tempResponse {
  position: relative;
  width: 100%;
  display: flex;
  align-items: flex-start;
  gap: 12px;
  margin-bottom: 4px;
}

/* Adjust message content to accommodate the external copy button */
.message-content {
  position: relative;
  max-width: 85%;
  margin-right: 50px; /* Add space for the copy button */
}

.user .message-content {
  width: 100%;
  max-width: 85%;
  margin-right: 50px;
  margin-left: 0; /* Reset any left margin */
}

/* For user messages, position copy button on the left side since messages are right-aligned */
.user .copy-btn {
  right: auto;
  left: -40px;
}

.user .message-content {
  margin-left: 50px; /* Add space on left for user messages */
  margin-right: 0;
}

/* Dark mode support for copy button */
@media (prefers-color-scheme: dark) {
  .copy-btn {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.2);
    color: #cccccc;
  }

  .copy-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.4);
    color: #ffffff;
  }
}

/* Responsive adjustments */
@media screen and (max-width: 767px) {
  /* On mobile, reduce the space and button size */
  .copy-btn {
    right: -35px;
    width: 28px;
    height: 28px;
    padding: 4px 6px;
  }
  
  .user .copy-btn {
    left: -35px;
  }
  
  .message-content {
    margin-right: 40px;
  }
  
  .user .message-content {
    margin-left: 40px;
    margin-right: 0;
  }
}

@media screen and (min-width: 768px) and (max-width: 1024px) {
  /* Tablet adjustments */
  .message-content {
    max-width: 80%;
    margin-right: 45px;
  }
  
  .user .message-content {
    max-width: 80%;
    margin-left: 45px;
    margin-right: 0;
  }
}

@media screen and (min-width: 1025px) {
  /* Desktop adjustments */
  .message-content {
    max-width: 75%;
    margin-right: 50px;
  }
  
  .user .message-content {
    max-width: 75%;
    margin-left: 50px;
    margin-right: 0;
  }
}
